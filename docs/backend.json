{
  "entities": {
    "QuizAttempt": {
      "title": "Quiz Attempt",
      "type": "object",
      "description": "Represents a single attempt at a quiz by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the quiz attempt."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who took the quiz."
        },
        "questions": {
          "type": "array",
          "description": "The list of questions in the quiz.",
          "items": {
            "$ref": "#/backend/entities/Question"
          }
        },
        "userAnswers": {
          "type": "array",
          "description": "The answers provided by the user.",
          "items": {
            "type": "string"
          }
        },
        "score": {
          "type": "number",
          "description": "The final score achieved by the user."
        },
        "total": {
          "type": "number",
          "description": "The total number of questions in the quiz."
        },
        "completedAt": {
          "type": "string",
          "description": "Timestamp of when the quiz was completed.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "questions",
        "userAnswers",
        "score",
        "total",
        "completedAt"
      ]
    },
    "Question": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Question",
      "type": "object",
      "description": "Represents a question in the Kerala PSC exam preparation app.",
      "properties": {
        "question": {
          "type": "string",
          "description": "The text of the question."
        },
        "options": {
          "type": "array",
          "description": "Array of possible answer options for the question.",
          "items": {
            "type": "string"
          }
        },
        "correctAnswer": {
          "type": "string",
          "description": "The correct answer."
        },
        "explanation": {
          "type": "string",
          "description": "A detailed explanation of the correct answer."
        }
      },
      "required": [
        "question",
        "options",
        "correctAnswer"
      ]
    },
    "UserAnswer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserAnswer",
      "type": "object",
      "description": "Represents a user's answer to a specific question.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user answer."
        },
        "questionId": {
          "type": "string",
          "description": "Reference to the Question answered. (Relationship: Question 1:N UserAnswer)"
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who answered. (Relationship: User 1:N UserAnswer)"
        },
        "selectedAnswerIndex": {
          "type": "number",
          "description": "The index of the answer option selected by the user."
        },
        "isCorrect": {
          "type": "boolean",
          "description": "Indicates whether the user's answer was correct."
        },
        "answeredAt": {
          "type": "string",
          "description": "Timestamp of when the question was answered.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "questionId",
        "userId",
        "selectedAnswerIndex",
        "isCorrect",
        "answeredAt"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": [
        "id",
        "email"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Only the authenticated user can read/write their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/questions/{questionId}",
        "definition": {
          "entityName": "Question",
          "schema": {
            "$ref": "#/backend/entities/Question"
          },
          "description": "Stores all questions. Read access should be public, write access restricted to admins (not defined in requirements but assumed).",
          "params": [
            {
              "name": "questionId",
              "description": "The unique identifier of the question."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/quizAttempts/{quizAttemptId}",
        "definition": {
          "entityName": "QuizAttempt",
          "schema": {
            "$ref": "#/backend/entities/QuizAttempt"
          },
          "description": "Stores a user's quiz attempts. Only the user can read/write their own attempts.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "quizAttemptId",
              "description": "The unique identifier of the quiz attempt."
            }
          ]
        }
      }
    ]
  }
}